# Question

## Calculate the histogram of oriented gradient for the following example image patch of 5x5. You can assume the number of orientation bins to be 8.



# Solution

1. Patch = $\left[\begin{matrix} 120 & 20 & 80 & 100 & 125\\ 50 & 150 & 70 & 125 & 110\\ 140 & 80 & 85 & 90 & 60 \\ 150 & 200 & 60 & 200 & 65\\ 200 & 90 & 50 & 100 & 50 \end{matrix}\right]$

2. Do the mirror padding for the pixel values above.

   Patch with Paddings = $\left[\begin{matrix} 120 & 120 & 20 & 80 & 100 & 125 & 125\\ 120 & 120 & 20 & 80 & 100 & 125 & 125\\ 50 & 50 & 150 & 70 & 125 & 110 & 110\\ 140 & 140 & 80 & 85 & 90 & 60 & 60\\ 150 & 150 & 200 & 60 & 200 & 65 & 65\\ 200 & 200 & 90 & 50 & 100 & 50 & 50\\ 200 & 200 & 90 & 50 & 100 & 50 & 50\end{matrix}\right]$

3. Compute the Gradients, Magnitude and Orientation along the $x$ and $y$ axis for these $5\times5=25$ pixels:

   | Pixels (position: value) | Gradients along $x$ axis | Gradients along $y$ axis | Magnitude | Orientation |
   | :----------------------: | :----------------------: | :----------------------: | :-------: | :---------: |
   |       (1, 1): 120        |           -100           |            70            | 122.0656  |  145.0080   |
   |        (1, 2): 20        |           -40            |           -130           | 136.0147  |   72.8973   |
   |        (1, 3): 80        |            80            |            10            |  80.6226  |   7.1250    |
   |       (1, 4): 100        |            45            |           -25            |  51.4782  |  150.9454   |
   |       (1, 5): 125        |            25            |            15            |  29.1548  |   30.9638   |
   |        (2, 1): 50        |           100            |           -20            | 101.9804  |  168.6901   |
   |       (2, 2): 150        |            20            |           -60            |  63.2456  |  108.4349   |
   |        (2, 3): 70        |           -25            |            -5            |  25.4951  |   11.3099   |
   |       (2, 4): 125        |            40            |            10            |  41.2311  |   14.0362   |
   |       (2, 5): 110        |           -15            |            65            |  66.7083  |  102.9946   |
   |       (3, 1): 140        |           -60            |           -100           | 116.6190  |   59.0362   |
   |        (3, 2): 80        |           -55            |           -50            |  74.3303  |   42.2737   |
   |        (3, 3): 85        |            10            |            10            |  14.1421  |     45      |
   |        (3, 4): 90        |           -25            |           -75            |  79.0569  |   71.5651   |
   |        (3, 5): 60        |           -30            |            45            |  54.0833  |  123.6901   |
   |       (4, 1): 150        |            50            |           -60            |  78.1025  |  129.8056   |
   |       (4, 2): 200        |           -90            |           -10            |  90.5539  |   6.3402    |
   |        (4, 3): 60        |            0             |            35            |    35     |     90      |
   |       (4, 4): 200        |            5             |           -10            |  11.1803  |  116.5651   |
   |        (4, 5): 65        |           -135           |            10            | 135.3699  |  175.7636   |
   |       (5, 1): 200        |           -110           |           -50            | 120.8305  |   24.4440   |
   |        (5, 2): 90        |           -150           |           110            | 186.0108  |  143.7462   |
   |        (5, 3): 50        |            10            |            10            |  14.1421  |     45      |
   |       (5, 4): 100        |            0             |           100            |    100    |     90      |
   |        (5, 5): 50        |           -50            |            15            |  52.2015  |  163.3008   |

4. Use method 1 to compute the **frequency**, and shown them as a histgram as below:

   ![hist](./hist.png)

5. Thus, the final feature vector is $[5, 4, 1, 4, 2, 3, 3, 3]$.
